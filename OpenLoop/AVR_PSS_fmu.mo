within Control_Validation.OpenLoop;
model AVR_PSS_fmu
  inner OpenIPSL.Electrical.SystemBase SysData
    annotation (Placement(transformation(extent={{-84,60},{-26,80}})));
  OpenIPSL.Electrical.Controls.PSSE.ES.ST5B sT5B(
    T_R=0,
    T_C1=0.8,
    T_B1=6,
    T_C2=0.08,
    T_B2=0.01,
    T_UC1=2,
    T_UB1=10,
    T_UC2=0.1,
    T_UB2=0.05,
    T_OC1=0.1,
    T_OB1=2,
    T_OC2=0.08,
    T_OB2=0.08,
    K_C=0.004,
    T_1=0.001,
    K_R=200,
    V_RMAX=5,
    V_RMIN=-4)
    annotation (Placement(transformation(extent={{12,-22},{56,22}})));
  OpenIPSL.Electrical.Controls.PSSE.PSS.PSS2B pSS2B(
    T_w1=2,
    T_w2=2,
    T_6=0,
    T_w3=2,
    T_w4=0,
    T_7=2,
    K_S2=0.1564,
    K_S3=1,
    T_8=0,
    T_9=0,
    K_S1=10,
    T_1=0.25,
    T_2=0.03,
    T_3=0.15,
    T_4=0.015,
    T_10=0,
    T_11=0,
    V_S1MAX=999,
    V_S1MIN=-999,
    V_S2MAX=999,
    V_S2MIN=-999,
    V_STMAX=0.1,
    V_STMIN=-0.1,
    M=0,
    N=0) annotation (Placement(transformation(extent={{-40,20},{-4,28}})));
  Modelica.Blocks.Interfaces.RealInput Vt
    annotation (Placement(transformation(extent={{-96,-50},{-56,-10}})));
  Modelica.Blocks.Sources.Constant Efd0(k=1.43)
    annotation (Placement(transformation(extent={{-86,-66},{-66,-46}})));
  Modelica.Blocks.Sources.Constant VUEL(k=-100)
    annotation (Placement(transformation(extent={{-52,-82},{-32,-62}})));
  Modelica.Blocks.Sources.Constant VOEL(k=100)
    annotation (Placement(transformation(extent={{8,-92},{28,-72}})));
  Modelica.Blocks.Sources.CombiTimeTable XADIFD(table=[0,1.4314197; 0.02,
        1.4314197; 0.04,1.4314197; 0.06,1.4314197; 0.08,1.4314197; 0.1,
        1.4314197; 0.12,1.4314197; 0.14,1.4314197; 0.16,1.4314197; 0.18,
        1.4314197; 0.2,1.4314197; 0.22,1.4314197; 0.24,1.4314197; 0.26,
        1.4314197; 0.28,1.4314197; 0.3,1.4314197; 0.32,1.4314197; 0.34,
        1.4314197; 0.36,1.4314197; 0.38,1.4314197; 0.4,1.4314197; 0.42,
        1.4314197; 0.44,1.4314197; 0.46,1.4314197; 0.48,1.4314197; 0.5,
        1.4314197; 0.52,1.4314197; 0.54,1.4314197; 0.56,1.4314197; 0.58,
        1.4314197; 0.6,1.4314197; 0.62,1.4314197; 0.64,1.4314197; 0.66,
        1.4314197; 0.68,1.4314197; 0.7,1.4314197; 0.72,1.4314197; 0.74,
        1.4314197; 0.76,1.4314197; 0.78,1.4314197; 0.8,1.4314197; 0.82,
        1.4314197; 0.84,1.4314197; 0.86,1.4314197; 0.88,1.4314197; 0.9,
        1.4314197; 0.92,1.4314197; 0.94,1.4314197; 0.96,1.4314197; 0.98,
        1.4314197; 1,1.4314197; 1.02,1.4314197; 1.04,1.4314197; 1.06,1.4314197;
        1.08,1.4314197; 1.1,1.4314197; 1.12,1.4314197; 1.14,1.4314197; 1.16,
        1.4314197; 1.18,1.4314197; 1.2,1.4314197; 1.22,1.4314197; 1.24,
        1.4314197; 1.26,1.4314197; 1.28,1.4314197; 1.3,1.4314197; 1.32,
        1.4314197; 1.34,1.4314197; 1.36,1.4314197; 1.38,1.4314197; 1.4,
        1.4314197; 1.42,1.4314197; 1.44,1.4314197; 1.46,1.4314197; 1.48,
        1.4314197; 1.5,1.4314197; 1.52,1.4314197; 1.54,1.4314197; 1.56,
        1.4314197; 1.58,1.4314197; 1.6,1.4314197; 1.62,1.4314197; 1.64,
        1.4314197; 1.66,1.4314197; 1.68,1.4314197; 1.7,1.4314197; 1.72,
        1.4314197; 1.74,1.4314197; 1.76,1.4314197; 1.78,1.4314197; 1.8,
        1.4314197; 1.82,1.4314197; 1.84,1.4314197; 1.86,1.4314197; 1.88,
        1.4314197; 1.9,1.4314197; 1.92,1.4314197; 1.94,1.4314197; 1.96,
        1.4314197; 1.98,1.4314197; 2,1.4314197; 2,2.0459516; 2.00063,2.0547633;
        2.00063,2.0547633; 2.02,2.30943; 2.04,2.4980779; 2.06,2.6236875; 2.08,
        2.7051075; 2.1,2.75699; 2.12,2.7895281; 2.14,2.809207; 2.15,2.8156812;
        2.15,2.3017807; 2.16,2.1849017; 2.18,2.0312574; 2.2,1.9544786; 2.208294,
        1.9380981; 2.208294,1.9380981; 2.208294,1.9380981; 2.208294,1.9380981;
        2.22,1.9163467; 2.24,1.8821263; 2.26,1.8657413; 2.28,1.8618327; 2.3,
        1.8637828; 2.32,1.8668983; 2.34,1.8682173; 2.36,1.8658607; 2.38,
        1.8587598; 2.4,1.8465044; 2.42,1.8291287; 2.44,1.8069609; 2.46,
        1.7805566; 2.48,1.7506796; 2.5,1.7182235; 2.52,1.6840593; 2.54,
        1.6490474; 2.56,1.6140523; 2.58,1.5798237; 2.6,1.5470204; 2.62,
        1.5162053; 2.64,1.4877925; 2.66,1.4620717; 2.68,1.4392198; 2.7,
        1.4192998; 2.72,1.402297; 2.74,1.3881272; 2.76,1.3766743; 2.78,
        1.3678035; 2.8,1.3613807; 2.82,1.3572865; 2.84,1.35542; 2.86,1.3557082;
        2.88,1.3580996; 2.9,1.3625611; 2.92,1.369073; 2.94,1.3776139; 2.96,
        1.3881491; 2.98,1.400622; 3,1.4149383; 3.02,1.4309624; 3.04,1.4485084;
        3.06,1.4673404; 3.08,1.4871769; 3.1,1.5076873; 3.12,1.5285; 3.14,
        1.5492187; 3.16,1.5694098; 3.18,1.5886571; 3.2,1.6065655; 3.22,
        1.6227359; 3.24,1.6368386; 3.26,1.6485769; 3.28,1.6577016; 3.3,
        1.6640407; 3.32,1.6674837; 3.34,1.6679792; 3.36,1.6655678; 3.38,1.66033;
        3.4,1.6524428; 3.42,1.642113; 3.44,1.6296123; 3.46,1.6152558; 3.48,
        1.5993646; 3.5,1.5823095; 3.52,1.5644307; 3.54,1.5460901; 3.56,
        1.5276237; 3.58,1.5093423; 3.6,1.4915302; 3.62,1.4744427; 3.64,
        1.4582871; 3.66,1.443252; 3.68,1.4294697; 3.7,1.417061; 3.72,1.4060966;
        3.74,1.3966378; 3.76,1.3887098; 3.78,1.3823311; 3.8,1.377494; 3.82,
        1.3741854; 3.84,1.372377; 3.86,1.3720317; 3.88,1.3731068; 3.9,1.3755347;
        3.92,1.3792537; 3.94,1.3841982; 3.96,1.3902674; 3.98,1.3973837; 4,
        1.4054066; 4.02,1.4142374; 4.04,1.423702; 4.06,1.433674; 4.08,1.4439588;
        4.1,1.4543996; 4.12,1.4648058; 4.14,1.4749873; 4.16,1.4847622; 4.18,
        1.4939439; 4.2,1.5023649; 4.22,1.5098745; 4.24,1.5163327; 4.26,
        1.5216365; 4.28,1.5256906; 4.3,1.5284421; 4.32,1.5298516; 4.34,
        1.5299177; 4.36,1.5286587; 4.38,1.5261226; 4.4,1.5223823; 4.42,1.517528;
        4.44,1.5116762; 4.46,1.5049422; 4.48,1.4974685; 4.5,1.489409; 4.52,
        1.4808977; 4.54,1.4721078; 4.56,1.4631963; 4.58,1.4542836; 4.6,1.44554;
        4.62,1.4370675; 4.64,1.4289864; 4.66,1.4214089; 4.68,1.414406; 4.7,
        1.4080651; 4.72,1.4024422; 4.74,1.3975854; 4.76,1.3935324; 4.78,
        1.3903043; 4.8,1.3879133; 4.82,1.3863618; 4.84,1.38564; 4.86,1.3857275;
        4.88,1.3866009; 4.9,1.3882191; 4.92,1.3905402; 4.94,1.393512; 4.96,
        1.3970704; 4.98,1.4011524; 5,1.4056811; 5.02,1.4105784; 5.04,1.4157614;
        5.06,1.4211421; 5.08,1.4266328; 5.1,1.4321424; 5.12,1.4375818; 5.14,
        1.4428631; 5.16,1.4479012; 5.18,1.4526172; 5.2,1.4569368; 5.22,
        1.4607942; 5.24,1.4641325; 5.26,1.4669054; 5.28,1.4690747; 5.3,
        1.4706178; 5.32,1.4715207; 5.34,1.4717811; 5.36,1.4714123; 5.38,
        1.4704313; 5.4,1.4688728; 5.42,1.4667774; 5.44,1.4641923; 5.46,
        1.4611768; 5.48,1.457789; 5.5,1.4540968; 5.52,1.450169; 5.54,1.4460742;
        5.56,1.4418838; 5.58,1.4376656; 5.6,1.4334863; 5.62,1.4294089; 5.64,
        1.4254925; 5.66,1.42179; 5.68,1.4183513; 5.7,1.4152175; 5.72,1.4124246;
        5.74,1.4100034; 5.76,1.4079754; 5.78,1.4063619; 5.8,1.4051743; 5.82,
        1.4044181; 5.84,1.4040931; 5.86,1.4041927; 5.88,1.4046994; 5.9,
        1.4055924; 5.92,1.4068426; 5.94,1.4084128; 5.96,1.410273; 5.98,
        1.4124081; 6,1.4147605; 6.02,1.4172839; 6.04,1.419935; 6.06,1.4226847;
        6.08,1.425479; 6.1,1.4282736; 6.12,1.4310249; 6.14,1.4336923; 6.16,
        1.436236; 6.18,1.4386195; 6.2,1.4408096; 6.22,1.4427724; 6.24,1.4444844;
        6.26,1.4459252; 6.28,1.4470797; 6.3,1.44793; 6.32,1.4484744; 6.34,
        1.4487141; 6.36,1.4486576; 6.38,1.4482992; 6.4,1.4476618; 6.42,
        1.4467671; 6.44,1.445643; 6.46,1.4442962; 6.48,1.4427634; 6.5,1.4410794;
        6.52,1.4392807; 6.54,1.437387; 6.56,1.4354346; 6.58,1.4334605; 6.6,
        1.4314986; 6.62,1.4295754; 6.64,1.4277196; 6.66,1.4259596; 6.68,
        1.424319; 6.7,1.4228214; 6.72,1.4214858; 6.74,1.4203256; 6.76,1.4193509;
        6.78,1.4185749; 6.8,1.4180064; 6.82,1.4176431; 6.84,1.4174817; 6.86,
        1.4175221; 6.88,1.4177634; 6.9,1.4181904; 6.92,1.418789; 6.94,1.4195476;
        6.96,1.4204558; 6.98,1.421491; 7,1.4226325; 7.02,1.4238603; 7.04,
        1.4251585; 7.06,1.4265016; 7.08,1.427867; 7.1,1.429233; 7.12,1.4305813;
        7.14,1.4318898; 7.16,1.4331388; 7.18,1.4343103; 7.2,1.4353887; 7.22,
        1.4363595; 7.24,1.437211; 7.26,1.4379337; 7.28,1.4385164; 7.3,1.4389563;
        7.32,1.4392519; 7.34,1.4394044; 7.36,1.4394083; 7.38,1.4392725; 7.4,
        1.4390049; 7.42,1.4386168; 7.44,1.4381082; 7.46,1.4374965; 7.48,
        1.4367962; 7.5,1.4360234; 7.52,1.4351857; 7.54,1.4343014; 7.56,
        1.4333875; 7.58,1.4324609; 7.6,1.4315333; 7.62,1.4306203; 7.64,
        1.4297366; 7.66,1.4288955; 7.68,1.4281089; 7.7,1.4273877; 7.72,
        1.4267406; 7.74,1.426175; 7.76,1.4256991; 7.78,1.4253182; 7.8,1.425034;
        7.82,1.4248469; 7.84,1.4247593; 7.86,1.4247711; 7.88,1.424877; 7.9,
        1.4250718; 7.92,1.4253516; 7.94,1.425712; 7.96,1.4261428; 7.98,
        1.4266346; 8,1.4271787; 8.02,1.4277681; 8.04,1.4283903; 8.06,1.4290341;
        8.08,1.4296894; 8.1,1.4303476; 8.12,1.430997; 8.14,1.4316279; 8.16,
        1.4322307; 8.18,1.4327978; 8.2,1.4333208; 8.22,1.4337933; 8.24,
        1.4342095; 8.26,1.4345632; 8.28,1.4348518; 8.3,1.4350733; 8.32,
        1.4352266; 8.34,1.4353083; 8.36,1.4353216; 8.38,1.4352688; 8.4,
        1.4351538; 8.42,1.4349762; 8.44,1.4347433; 8.46,1.434461; 8.48,
        1.4341366; 8.5,1.4337724; 8.52,1.4333779; 8.54,1.4329604; 8.56,
        1.4325283; 8.58,1.4320863; 8.6,1.4316431; 8.62,1.431206; 8.64,1.4307817;
        8.66,1.4303763; 8.68,1.4299957; 8.7,1.4296452; 8.72,1.429329; 8.74,
        1.4290521; 8.76,1.4288175; 8.78,1.4286273; 8.8,1.4284825; 8.82,
        1.4283854; 8.84,1.4283365; 8.86,1.4283341; 8.88,1.4283766; 8.9,
        1.4284629; 8.92,1.4285914; 8.94,1.4287577; 8.96,1.4289576; 8.98,
        1.4291879; 9,1.4294451; 9.02,1.4297235; 9.04,1.4300178; 9.06,1.4303232;
        9.08,1.4306357; 9.1,1.4309496; 9.12,1.4312595; 9.14,1.4315612; 9.16,
        1.4318503; 9.18,1.4321227; 9.2,1.4323747; 9.22,1.4326025; 9.24,
        1.4328023; 9.26,1.432972; 9.28,1.4331094; 9.3,1.433213; 9.32,1.433282;
        9.34,1.4333163; 9.36,1.4333167; 9.38,1.4332846; 9.4,1.433221; 9.42,
        1.4331272; 9.44,1.4330056; 9.46,1.4328592; 9.48,1.4326912; 9.5,
        1.4325056; 9.52,1.4323068; 9.54,1.4320889; 9.56,1.4318596; 9.58,
        1.4316255; 9.6,1.4313914; 9.62,1.4311628; 9.64,1.4309454; 9.66,
        1.4307455; 9.68,1.4305534; 9.7,1.4303625; 9.72,1.4301896; 9.74,
        1.4300392; 9.76,1.429915; 9.78,1.4298213; 9.8,1.4297622; 9.82,1.4297376;
        9.84,1.4297158; 9.86,1.4297208; 9.88,1.429753; 9.9,1.4298126; 9.92,
        1.4298993; 9.94,1.4300131; 9.96,1.4301533; 9.98,1.4303089; 10,1.4304811;
        10,1.4304811])
    annotation (Placement(transformation(extent={{76,-90},{56,-70}})));
  Modelica.Blocks.Sources.Constant Efd1(k=1.43)
    annotation (Placement(transformation(extent={{-84,18},{-64,38}})));
equation
  connect(pSS2B.VOTHSG, sT5B.VOTHSG) annotation (Line(points={{-2.2,24},{2,24},
          {2,8.8},{9.8,8.8}}, color={0,0,127}));
  connect(sT5B.ECOMP, Vt) annotation (Line(points={{9.8,0},{-14,0},{-14,-30},{
          -76,-30}}, color={0,0,127}));
  connect(sT5B.EFD0, Efd0.y) annotation (Line(points={{9.8,-8.8},{9.8,-55.4},{
          -65,-55.4},{-65,-56}}, color={0,0,127}));
  connect(VUEL.y, sT5B.VUEL) annotation (Line(points={{-31,-72},{-4,-72},{-4,
          -62},{25.2,-62},{25.2,-24.2}}, color={0,0,127}));
  connect(sT5B.VOEL, VOEL.y)
    annotation (Line(points={{34,-24.2},{34,-82},{29,-82}}, color={0,0,127}));
  connect(XADIFD.y[1], sT5B.XADIFD) annotation (Line(points={{55,-80},{52,-80},
          {52,-24.2},{51.6,-24.2}}, color={0,0,127}));
  connect(Efd1.y, pSS2B.V_S1) annotation (Line(points={{-63,28},{-52,28},{-52,
          25.6},{-41.8,25.6}}, color={0,0,127}));
  connect(pSS2B.V_S2, Efd1.y) annotation (Line(points={{-41.8,22.4},{-52.9,22.4},
          {-52.9,28},{-63,28}}, color={0,0,127}));
  annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(
        coordinateSystem(preserveAspectRatio=false)));
end AVR_PSS_fmu;
